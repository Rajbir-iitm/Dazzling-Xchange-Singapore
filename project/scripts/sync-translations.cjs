#!/usr/bin/env node
/**
 * Syncs translations: copies structure from a source locale (es) to target locales
 * and applies language-specific overrides. Run: node scripts/sync-translations.cjs
 */
const fs = require('fs');
const path = require('path');

const LOCALES_DIR = path.join(__dirname, '../public/locales');
const EN = JSON.parse(fs.readFileSync(path.join(LOCALES_DIR, 'en.json'), 'utf8'));
const ES = JSON.parse(fs.readFileSync(path.join(LOCALES_DIR, 'es.json'), 'utf8'));

// Portuguese translations (from Spanish, adapted)
const PT_OVERRIDES = {
  'home.hero.line1': 'Envie dinheiro',
  'home.hero.line2': 'Através das fronteiras,',
  'home.hero.line3': 'Sem esforço.',
  'home.hero.description': 'Registe-se, verifique sua identidade e comece a enviar dinheiro internacionalmente — via nosso Portal do Cliente ou app móvel. Transferência bancária ou FlexM Wallet. Você escolhe.',
  'home.marquee.0': 'Registo OTP', 'home.marquee.1': 'KYC ONFIDO', 'home.marquee.2': 'Ativação da carteira',
  'home.marquee.3': 'Transferência bancária', 'home.marquee.4': 'FlexM Wallet', 'home.marquee.5': 'Recarga PayNow',
  'home.marquee.6': 'Gestão de destinatários', 'home.marquee.7': 'Rastreio de transações', 'home.marquee.8': 'Multi-moeda',
  'home.marquee.9': 'Taxas em tempo real', 'home.marquee.10': 'Download de recibos', 'home.marquee.11': 'Suporte 24/7',
  'home.howItWorks.label': 'Como funciona', 'home.howItWorks.title': 'Quatro passos para o seu',
  'home.howItWorks.titleHighlight': 'primeiro transferência internacional.',
  'home.steps.0.title': 'Registe-se em minutos',
  'home.steps.0.desc': 'Registe-se como Individual ou Empresa com o seu número de telemóvel. Verifique a sua identidade via uma senha única enviada diretamente.',
  'home.steps.1.title': 'Verifique com ONFIDO',
  'home.steps.1.desc': 'Complete o seu KYC através do ONFIDO — carregue os seus documentos, complete o reconhecimento facial e fique verificado.',
  'home.steps.2.title': 'Desbloqueie a sua carteira',
  'home.steps.2.desc': 'Após verificação, ative a sua carteira digital FlexM com um único OTP. Recarregue via PayNow e está pronto para transacionar.',
  'home.steps.3.title': 'Envie dinheiro globalmente',
  'home.steps.3.desc': 'Escolha Transferência bancária ou FlexM Wallet, selecione um destinatário, reveja taxas e comissões em tempo real e confirme a sua transferência internacional.',
  'home.features.label': 'Porquê Dazzling Xchange',
  'home.features.title': 'Construído para confiança.',
  'home.features.titleHighlight': 'Projetado para velocidade.',
  'home.features.security.title': 'Segurança Licenciada e Verificada por ONFIDO',
  'home.features.security.desc': 'Licenciado sob PSO (PS20200465) pela Autoridade Monetária de Singapura. Cada conta é verificada através da tecnologia de reconhecimento facial e documentos da ONFIDO.',
  'home.features.rates.title': 'Taxas e comissões instantâneas',
  'home.features.rates.desc': 'As taxas de câmbio atualizam em tempo real enquanto escreve. As comissões são mostradas antecipadamente — sem surpresas.',
  'home.features.visibility.title': 'Visibilidade total das transações',
  'home.features.visibility.desc': 'Rastreie cada transferência — Pendente, A processar, Concluída. Ordene, filtre, exporte e descarregue recibos a qualquer momento.',
  'home.features.support.title': 'Suporte dedicado 24/7',
  'home.features.support.desc': 'A nossa equipa de suporte está disponível 24 horas. Cada questão é reconhecida e resolvida em 24 horas.',
  'home.features.payments.title': 'Canais de pagamento duais',
  'home.features.payments.desc': 'Transferência bancária — confirmada em 15 minutos. FlexM Wallet — processamento instantâneo. Recarga via PayNow QR.',
  'home.stats.transfers': 'Transferências transfronteiriças',
  'home.stats.users': 'Utilizadores registados',
  'home.stats.countries': 'Países suportados',
  'home.stats.support': 'Suporte ao cliente',
  'home.portal.title': 'Veja o portal e a app',
  'home.portal.titleHighlight': 'em ação.',
  'home.portal.description': 'Percorra cada ecrã — do registo e verificação KYC até enviar a sua primeira transferência. Sem suposições.',
  'home.portal.cta': 'Explorar o guia',
  'home.testimonials.title': 'Confiado por clientes',
  'home.testimonials.titleHighlight': 'em todo o mundo.',
  'home.testimonials.0.text': 'Registei-me e completei o KYC em menos de dez minutos. A minha carteira estava ativa no mesmo dia e enviei a minha primeira transferência nessa noite.',
  'home.testimonials.1.text': 'A opção de Transferência bancária é incrivelmente fluida. Revisei as taxas, confirmei e recebi um email de confirmação em 15 minutos.',
  'home.testimonials.2.text': 'Gerir os meus destinatários é muito fácil — guardei todos os membros da minha família e posso enviar dinheiro a qualquer um em poucos cliques.',
  'home.testimonials.3.text': 'Comissões transparentes e taxas de câmbio em tempo real. Sempre sei exatamente o que pago antes de confirmar. Sem surpresas.',
  'home.testimonials.4.text': 'A recarga da FlexM Wallet através do PayNow é excelente. Os fundos estavam na minha carteira em 30 minutos e pude enviar dinheiro de imediato.',
  'home.cta.title': 'Pronto para enviar a sua',
  'home.cta.titleHighlight': 'primeira transferência?',
  'home.cta.description': 'Junte-se a milhares de clientes que confiam na Dazzling Xchange para os seus pagamentos internacionais.',
  'home.cta.portal': 'Abrir portal do cliente',
  'home.cta.contact': 'Contacte-nos',
  'about.hero.badge': 'Sobre Dazzling Xchange',
  'about.hero.line1': 'Permitir que as pessoas movam',
  'about.hero.line2': 'dinheiro',
  'about.hero.line2Highlight': 'através das fronteiras.',
  'about.hero.description': 'Dazzling Xchange é uma plataforma de remessas digitais licenciada com sede em Singapura. Tornamos simples para indivíduos e empresas registarem, verificarem e enviarem dinheiro internacionalmente.',
  'about.hero.placeholder': 'Placeholder de imagem',
  'about.mission.label': 'A Nossa Missão',
  'about.mission.title': 'Tornar as transferências internacionais',
  'about.mission.titleHighlight': 'acessíveis a todos.',
  'about.metrics.label': 'O Nosso Impacto',
  'about.metrics.titleHighlight': 'Projetado para escalar.',
  'about.metrics.revenue.label': 'Receita em FY2023',
  'about.metrics.transfers.label': 'Transferências internacionais',
  'about.metrics.customers.label': 'Clientes verificados',
  'about.metrics.team.label': 'Membros da equipa globalmente',
  'about.values.label': 'Os Nossos Valores',
  'about.values.title': 'O que',
  'about.values.titleHighlight': 'defendemos.',
  'about.values.security.title': 'Segurança e conformidade',
  'about.values.security.desc': 'Licenciado sob PSO (PS20200465) com KYC ONFIDO, autenticação OTP e conformidade regulatória total para proteger cada transferência.',
  'about.values.technology.title': 'Impulsionado pela tecnologia',
  'about.values.technology.desc': 'Taxas de câmbio em tempo real, rastreamento instantâneo de estado, recibos descarregáveis e infraestrutura moderna que processa transferências em minutos.',
  'about.values.customerFirst.title': 'Design centrado no cliente',
  'about.values.customerFirst.desc': 'Registo guiado, fluxos de pagamento intuitivos, gestão completa de destinatários e suporte 24/7 que resolve questões em 24 horas.',
  'about.values.global.desc': 'Envie dinheiro internacionalmente em múltiplas moedas através de Transferência bancária ou FlexM Wallet com comissões transparentes.',
  'services.hero.badge': 'Os Nossos Serviços',
  'services.hero.line1': 'Um portal. Uma app.',
  'services.hero.line1Highlight': 'Controlo total.',
  'services.hero.description': 'Do registo e verificação de identidade às transferências internacionais e gestão de transações — tudo o que precisa, concebido para indivíduos e empresas.',
  'services.hero.placeholder': 'Placeholder de imagem',
  'services.journey.label': 'A Sua Jornada',
  'services.journey.title': 'Registe-se para enviar —',
  'services.journey.titleHighlight': 'em quatro passos.',
  'services.journey.step1.title': 'Registar',
  'services.journey.step2.title': 'Verificar identidade',
  'services.journey.step3.title': 'Ativar carteira',
  'services.journey.step4.title': 'Enviar dinheiro',
  'services.payment.label': 'Canais de pagamento',
  'services.payment.title': 'Duas formas de enviar.',
  'services.payment.titleHighlight': 'A sua escolha.',
  'services.capabilities.label': 'Capacidades do portal e app',
  'services.capabilities.title': 'Gerir, monitorizar,',
  'services.capabilities.titleHighlight': 'manter o controlo.',
  'services.capabilities.receivers.title': 'Diretório de destinatários',
  'services.capabilities.tracking.title': 'Rastreio de transações',
  'services.capabilities.wallet.title': 'Carteira e saldo',
  'services.cta.heading': 'Experimente',
  'services.cta.headingHighlight': 'você mesmo.',
  'services.cta.description': 'Crie a sua conta e comece a enviar dinheiro internacionalmente em minutos.',
  'services.cta.portal': 'Abrir portal do cliente',
  'services.cta.contactBtn': 'Contacte-nos',
  'walkthrough.hero.badge': 'Guia do portal e app',
  'walkthrough.hero.line1': 'Cada ecrã.',
  'walkthrough.hero.line2': 'Cada passo.',
  'walkthrough.hero.line2Highlight': 'Sem suposições.',
  'walkthrough.cta.title': 'Pronto para',
  'walkthrough.cta.titleHighlight': 'começar?',
  'walkthrough.cta.portal': 'Abrir portal do cliente',
  'walkthrough.cta.contact': 'Contacte-nos',
  'articles.hero.badge': 'Artigos e guias',
  'articles.hero.line1': 'Informação para',
  'articles.hero.line1Highlight': 'transferências mais inteligentes.',
  'articles.search.placeholder': 'Pesquisar artigos...',
  'articles.card.label': 'Artigo',
  'articles.card.readMore': 'Ler mais',
  'articles.empty.title': 'Nenhum artigo encontrado',
  'articles.empty.withQuery': 'Não encontrámos artigos que correspondam à sua pesquisa. Tente outras palavras-chave.',
  'articles.empty.noQuery': 'Não há artigos disponíveis. Volte em breve!',
  'articles.empty.clearSearch': 'Limpar pesquisa',
  'about.mission.p1': 'Acreditamos que enviar dinheiro através das fronteiras deve ser tão simples como enviar uma mensagem. A nossa plataforma gere a complexidade — registo seguro por OTP, verificação de identidade ONFIDO, ativação da carteira, gestão de destinatários e rastreio de transações de ponta a ponta — para que se possa focar no que mais importa.',
  'about.mission.p2.start': 'Quer seja um indivíduo a enviar fundos à família ou uma empresa a gerir pagamentos a fornecedores internacionais, fornecemos as ferramentas, segurança e transparência para tornar cada transferência',
  'about.mission.p2.highlight': 'sem esforço.',
  'services.journey.step1.desc': 'Registe-se com o seu número de telemóvel, verifique via OTP e crie a sua conta Individual ou Empresarial segura — tudo em menos de dois minutos.',
  'services.journey.step2.desc': 'Complete o KYC através do ONFIDO com carregamento de documentos e reconhecimento facial. O seu estado verificado desbloqueia a sua carteira instantaneamente.',
  'services.journey.step3.desc': 'Desbloqueie a sua carteira digital FlexM com um único OTP. Recarregue via PayNow QR — fundos creditados em 30 minutos.',
  'services.journey.step4.desc': 'Escolha Transferência bancária ou FlexM Wallet. Reveja taxas de câmbio e comissões em tempo real. Confirme a sua transferência e acompanhe-a.',
  'services.payment.bank.title': 'Transferência bancária',
  'services.payment.bank.highlight': '~15 min confirmação',
  'services.payment.bank.f1': 'Consulte os dados bancários do beneficiário no ecrã',
  'services.payment.bank.f2': 'Efectue uma transferência para a conta indicada',
  'services.payment.bank.f3': 'Pagamento confirmado em 15 minutos',
  'services.payment.bank.f4': 'Email de confirmação enviado pela DX à receção',
  'services.payment.bank.f5': 'ID de transação gerado para rastreio',
  'services.payment.wallet.title': 'FlexM Wallet',
  'services.payment.wallet.highlight': 'Processamento instantâneo',
  'services.payment.wallet.f1': 'Pague diretamente do saldo da sua carteira',
  'services.payment.wallet.f2': 'Recarregue via PayNow QR — creditado em 30 min',
  'services.payment.wallet.f3': 'Débito e processamento instantâneos',
  'services.payment.wallet.f4': 'Saldo insuficiente ativa pedido de recarga',
  'services.payment.wallet.f5': 'Atualizações de saldo em tempo real após cada pagamento',
  'services.payment.preview': 'Pré-visualização do fluxo de pagamento',
  'services.capabilities.receivers.desc': 'Adicione destinatários do fluxo Enviar dinheiro ou da página Destinatários. Guarde nome completo, país, moeda e dados bancários. Edite, elimine e pesquise em todo o diretório — escolha entre destinatários guardados para transferências repetidas instantâneas.',
  'services.capabilities.receivers.tags': 'Adicionar e editar,Pesquisar e filtrar,Seleção rápida,Multi-país',
  'services.capabilities.tracking.desc': 'Cada transação gera um ID de referência único. Rastreie o estado em tempo real — Pendente, A processar, Concluída ou Falhada. Aceda ao histórico com paginação, ordenação por colunas, filtros de data e pesquisa por referência. Exporte registos e descarregue recibos.',
  'services.capabilities.tracking.tags': 'Estado em tempo real,Ordenar e filtrar,Exportar registos,Descarregar recibos',
  'services.capabilities.wallet.desc': 'Ativada após verificação KYC, a sua carteira digital FlexM mostra o saldo em tempo real e histórico. Recarregue via PayNow QR — escaneie, pague, submeta a sua referência e os fundos são creditados em 30 minutos. Saldo insuficiente? O portal ou app pede-lhe para recarregar.',
  'services.capabilities.wallet.tags': 'Recarga PayNow,Saldo em tempo real,Crédito 30 min,Pedidos automáticos',
  'walkthrough.hero.description': 'Um guia visual completo do Portal do Cliente DX e da app — do seu primeiro registo à sua primeira transferência internacional e além.',
  'walkthrough.hero.placeholder': 'Placeholder de imagem',
  'walkthrough.screenshot': 'Placeholder de captura',
  'walkthrough.steps.0.title': 'Registo',
  'walkthrough.steps.0.subtitle': 'Crie a sua conta em minutos',
  'walkthrough.steps.0.description': 'Escolha entre conta Individual ou Empresarial. Introduza o seu número para receber um OTP de verificação. Preencha o perfil, crie uma palavra-passe segura e aceite os Termos e Condições. A sua conta ficará pronta — inicie sessão com o seu número ou email.',
  'walkthrough.steps.0.highlights': 'Contas Individual e Empresarial,Verificação OTP por telemóvel,Prevenção de email/telemóvel duplicado,Força da palavra-passe,Email de confirmação no registo',
  'walkthrough.steps.0.screenshot': 'Registo',
  'walkthrough.steps.1.title': 'Verificação KYC',
  'walkthrough.steps.1.subtitle': 'Verificação de identidade powered por ONFIDO',
  'walkthrough.steps.1.description': 'Inicie KYC a partir da sua página inicial ou perfil. Carregue os seus documentos de identidade (Passaporte, BI — JPEG, PNG ou PDF até 2MB). ONFIDO abre numa nova janela para verificação documental e reconhecimento facial. Use o código QR para verificação móvel. O seu estado KYC atualiza imediatamente.',
  'walkthrough.steps.1.highlights': 'Verificação documental ONFIDO,Tecnologia de reconhecimento facial,Código QR para verificação móvel,Suporta JPEG PNG PDF (2MB máx.),Declaração PEP incluída',
  'walkthrough.steps.1.screenshot': 'Verificação KYC',
  'walkthrough.steps.2.title': 'Ativação da carteira',
  'walkthrough.steps.2.subtitle': 'Desbloqueie a sua carteira digital FlexM',
  'walkthrough.steps.2.description': 'Após verificação KYC, clique em "Desbloquear carteira" no seu painel. Verifique com um OTP único e a sua carteira ativa instantaneamente. Recarregue via PayNow — escaneie o QR, faça o pagamento e cole o número de referência. Fundos creditados em 30 minutos.',
  'walkthrough.steps.2.highlights': 'Carteira desbloqueia apenas após KYC,Ativação segura por OTP,Recarga via PayNow QR,Fundos creditados em 30 minutos,Exibição de saldo em tempo real',
  'walkthrough.steps.2.screenshot': 'Ativação da carteira',
  'walkthrough.steps.3.subtitle': 'Dois canais de pagamento flexíveis',
  'walkthrough.steps.3.description': 'Navegue para "Enviar dinheiro" e escolha o seu método de pagamento. Transferência bancária: reveja os dados do beneficiário, faça a transferência e receba confirmação em 15 minutos. FlexM Wallet: pague diretamente do saldo da carteira para processamento instantâneo. Taxas de câmbio e comissões atualizam em tempo real ao introduzir o valor.',
  'walkthrough.steps.3.highlights': 'Transferência bancária — confirmada em ~15 min,FlexM Wallet — processamento instantâneo,Exibição de taxa em tempo real,Cálculo de comissões em vivo,Emails de confirmação em cada passo',
  'walkthrough.steps.4.title': 'Gestão de destinatários',
  'walkthrough.steps.4.subtitle': 'Organize os seus beneficiários internacionais',
  'walkthrough.steps.4.description': 'Adicione destinatários do fluxo Enviar dinheiro ou da página Destinatários. Guarde nome completo, país, moeda e dados da conta. Edite, elimine ou pesquise na sua lista a qualquer momento. Escolha entre destinatários guardados para futuras transferências rápidas.',
  'walkthrough.steps.4.highlights': 'Adicionar de Enviar dinheiro ou página Destinatários,Nome país moeda dados da conta,Editar e eliminar,Pesquisar e filtrar destinatários,Seleção rápida para transferências repetidas',
  'walkthrough.steps.4.screenshot': 'Gestão de destinatários',
  'walkthrough.steps.5.title': 'Rastreio de transações',
  'walkthrough.steps.5.subtitle': 'Visibilidade total sobre cada transferência',
  'walkthrough.steps.5.description': 'Cada transação gera um ID de referência único. Rastreie o estado em tempo real: Pendente → A processar → Concluída (ou Falhada/Cancelada). Aceda ao histórico com paginação, ordenação por colunas, filtros de data e pesquisa por referência. Exporte registos e descarregue recibos quando quiser.',
  'walkthrough.steps.5.highlights': 'ID de referência único por transação,Estado em tempo real: Pendente → Concluída,Ordenar filtrar e pesquisa por data,Exportar e descarregar recibos,Ação rápida Fazer outro pagamento',
  'walkthrough.steps.5.screenshot': 'Rastreio de transações',
  'walkthrough.steps.6.title': 'FAQ e suporte',
  'walkthrough.steps.6.subtitle': 'Ajuda está a um clique',
  'walkthrough.steps.6.description': 'Aceda a uma secção FAQ completa com pesquisa e respostas expansíveis. Para o resto, a nossa equipa de apoio ao cliente está disponível 24/7 — qualquer questão é resolvida em 24 horas.',
  'walkthrough.steps.6.highlights': 'Secção FAQ pesquisável,Respostas expansíveis,Apoio ao cliente 24/7,Questões resolvidas em 24 horas',
  'walkthrough.steps.6.screenshot': 'FAQ e suporte',
  'walkthrough.cta.description': 'Crie a sua conta no Portal do Cliente DX ou app e viva cada passo que explorou — em direto.',
  'articles.hero.description': 'Guias de peritos, tutoriais e informação para o ajudar a navegar transferências internacionais, conformidade e soluções financeiras.',
  'articles.search.results': '{{count}} artigo(s) encontrado(s) para "{{query}}"',
  'articles.card.fallbackDesc': 'Explore este guia completo para aprofundar a sua compreensão dos serviços financeiros internacionais.',
  'converter.from': 'De',
  'converter.to': 'Para',
  'converter.historicalRates': 'Taxas históricas',
  'converter.trend': 'tendência da taxa de câmbio',
  'converter.loading': 'A carregar taxa de câmbio...',
  'converter.retry': 'Tentar novamente',
  'converter.lastUpdated': 'Última atualização:',
  'converter.today': 'hoje',
};

function applyOverrides(localeObj, overrides) {
  for (const [k, v] of Object.entries(overrides)) {
    if (localeObj[k] !== undefined) localeObj[k] = v;
  }
  return localeObj;
}

function syncLocale(lang, overrides) {
  const filePath = path.join(LOCALES_DIR, `${lang}.json`);
  if (!fs.existsSync(filePath)) return;
  const data = JSON.parse(fs.readFileSync(filePath, 'utf8'));
  applyOverrides(data, overrides);
  fs.writeFileSync(filePath, JSON.stringify(data, null, 2), 'utf8');
  console.log(`Updated ${lang}.json`);
}

syncLocale('pt', PT_OVERRIDES);
console.log('Done.');
